### 数据预处理
股票池数据：全A股数据，并剔除其中对ST、PT股票，剔除每个截面期下一交易日涨跌停和停牌的股票 
预测目标：未来十天的收益率
### 构建算子（特征提取层）
- ts\_corr(X,Y,d) 相关系数 
- ts\_cov(X,Y,d) 协方差
- ts\_zscore 标准差
- ts\_return(X,d) 
- ts\_decaylinear(X, d) 时间加权
- min, max, sum
- **网络结构：**基础数据（三维）--> 特征抽取（Batchnorm）-->池化（max， mean，min）--> flatten --> result
![[Pasted image 20221110202734.png]]

![[Pasted image 20221110202803.png]]
![[Pasted image 20221110234900.png]]
![[Pasted image 20221110234742.png| AlphaNet-v3]]
- 改进
	- 扩充比率类特征
	- 池化层和全连接层换成LSTM/GRU层
### 构建回测
- AlphaNet-v1合成因子
	- 单因子的IC测试：每十个交易日计算利用当前因子值和下期个股收益计算RankIC
	- 分层测试：按照因子大小排序分成N组，多头收益减去空头收益来评价因子的多空效应
	- 构建中证500指增策略回测
- 模型可解释性分析（类似于树模型的特征重要性）
- ==SHAP分析 -- 模型可解释性==｜SHAP｜均值判断因子特征重要性
### 思考
- Alpha 最重要的特点是能够在基础交易数据的基础上来提取量价因子网络层，能够显式的构造类似于遗传算法树生成的因子，但问题在于这样的结构和采用这些特征抽取层来生成因子和先生成好因子再做mlp或者tree model有什么区别呢？
- 二元算子是按照排列组合数遍历的，因此本质上还是个截面模型，前面N-1层都生成的是截面因子
- 与Barra风格因子对比（size, beta, momentum, rv, liquidity, leverage...）分析因子的收益来源
- 构建回测的方法（IC评价因子的有效性，分层测试评价因子的多空效应）